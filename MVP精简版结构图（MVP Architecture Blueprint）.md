# MVP 精简版结构图（MVP Architecture Blueprint）

根据完整版产品结构图的核心规划，第一版（MVP）将严格聚焦于以下三个核心功能，剥离一切非核心的辅助系统（如练习系统、图谱、多维运算等），以验证“数学对象=可交互对象”的核心产品理念。

## MVP 聚焦的三大核心模块

1. **二维线性变换可视化** (2D Linear Transformation Visualization)
2. **行变换步骤回放系统** (Row Operation Step Playback System)
3. **特征值/特征向量动画** (Eigenvalue/Eigenvector Animation)

---

## 一、 MVP 整体架构（精简的四层架构）

维持四层架构设计，但在各层大幅做减法：

```text
┌──────────────────────────────┐
│     表现层 (UI Layer)         │  <-- 仅包含三个核心功能视图及基础导航
├──────────────────────────────┤
│    交互逻辑层 (Interaction)    │  <-- 动画控制器，步骤记录器，输入状态同步
├──────────────────────────────┤
│  数学引擎层 (Math & Render)   │  <-- 2D Canvas 渲染，基础矩阵精确运算
├──────────────────────────────┤
│   数据层 (Local State)        │  <-- 暂时摒弃复杂持久化流，仅做本地状态和历史留存
└──────────────────────────────┘
```

---

## 二、 MVP 模块功能树

```text
MVP 线性代数可视化系统
│
├── 1. 二维线性变换模块（核心一）
│   ├── 输入与控制
│   │   ├── 2x2 变换矩阵输入面板
│   │   └── 连续变换插值滑块（控制 0% -> 100% 动画）
│   └── 渲染展示
│       ├── 基础网格与基向量（i, j）
│       ├── 变换后的网格变形动画
│       └── 行列式面积变化展示（平行四边形面积）
│
├── 2. 行变换回放实验室（核心二）
│   ├── 矩阵操作面板
│   │   ├── 初始矩阵录入
│   │   └── 三种初等行变换操作操作面板（交换、倍乘、倍加）
│   └── 追踪与回放系统
│       ├── 操作日志流视图
│       ├── 状态快照列表（历史记录）
│       └── 回放控制器（上一步、还原点）
│
└── 3. 特征值/特征向量演示（核心三）
    ├── 计算引擎
    │   └── 内部快速求解 2x2 矩阵特征值与特征向量
    └── 动态展示
        ├── 变换前后无偏转的方向标线（特征方向）
        ├── 特征向量高亮与缩放动画
        └── 特征值为负（反向）或复数（旋转，无实特征向量）的直观呈现
```

---

## 三、 MVP 核心引擎精简设计

数学与渲染引擎是 MVP 最重的一部分，剥除 3D 与复杂的结构识别，只保留基础支撑：

```text
MVP 核心支撑引擎
│
├── 1. 基础矩阵算子核心
│   ├── 矩阵加、乘与数乘
│   └── 符号/分数精确计算支持（避免行变换出现无尽小数）
│
├── 2. 状态时间轴（步骤管理器）
│   ├── 基于不变性（Immutable）的矩阵变换快照
│   └── 可回溯记录控制器
│
└── 3. 2D 几何插值渲染器
    ├── 坐标映射映射（数学逻辑坐标 -> 屏幕像素位置）
    ├── 线性缓动插值引擎（矩阵 A 平滑过渡到 矩阵 B）
    └── 图形绘制能力（点坐标、向量箭头、变形网格、半透明高亮）
```

---

## 四、 MVP 核心交互流

由于是 MVP，交互需极致简明，聚焦于核心的“改变状态 -> 观察响应”。

### 交互流 1：可视化变换与特征向量体验

```text
进入 2D 变换画板 
    ↓
用户更改 2x2 矩阵内的数值
    ↓
画布平滑渲染相应的网格扭曲动画（自动插值）
    ↓
用户开关【显示特征向量】
    ↓
在扭曲的网格中，特殊方向的高亮基线浮现，展现纯拉伸/压缩效果
```

### 交互流 2：初等行变换与步骤跟踪

```text
进入 行变换工作台
    ↓
设置一个 3x3 初始化矩阵和目标
    ↓
用户点击对应行，输入指令（如：第一行乘 -2 加到 第二行）
    ↓
视图实时闪烁并展示计算结果，右侧面板新增一条“R2 - 2R1 -> R2”日志
    ↓
遇到错误推导，用户在右侧日志中点击之前的某一步
    ↓
矩阵盘面即可时空倒流回退至选定历史节点
```

---

## 五、 MVP UI 草图设计

```text
┌───────────────────────────────────────────────────┐
│ [Logo 线性代数]   2D变换可视化 | 行变换步骤回放        │
├───────────────────────┬───────────────────────────┤
│ 左侧：控制与日志面板       │ 右侧：主交互舞台/可视化画布    │
│                       │                           │
│ [ 当前矩阵输入 ]         │                           │
│  [ 1 ]  [ 0 ]         │    [ 2D 坐标系网格 ]       │
│  [ 0 ]  [ 1 ]         │            或             │
│                       │    [ 实时变化的矩阵视图 ]    │
│ [ 动画播放滑块 ━〇─── ]   │                           │
│                       │                           │
│ [ 叠加：特征向量开关 ]    │                           │
├───────────────────────┤                           │
│ 操作日志记录表           │                           │
│ 1. 初始状态            │                           │
│ 2. 变换: R2 = R2-R1   │                           │
│ 3. 变换: ...          │                           │
└───────────────────────┴───────────────────────────┘
```

## 六、 MVP 成功验证标准 (Success Criteria)

1. **核心渲染性能**：网格变形和向量播放时能保持 60帧 的流畅动画，不卡顿。
2. **运算零误差**：行操作的数学运算引擎能准确表达分式计算过程，无浮点数带来的诡异小数。
3. **Ah-ha Moment（顿悟时刻）**：用户通过拖动参数，能以视觉秒懂曾经难以理解的“线性代数到底是在做什么空间操作”。
